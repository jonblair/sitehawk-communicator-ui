{"ast":null,"code":"import { Keys } from '@progress/kendo-react-common';\nimport * as idUtils from './itemIdUtils';\nimport { isItemExpandedAndWithChildren, isEnabledAndAllParentsEnabled } from './itemUtils';\n/**\n * @hidden\n */\n\nexport default function getItemIdUponKeyboardNavigation(item, itemId, items, keyCode, fieldsSvc) {\n  switch (keyCode) {\n    case Keys.left:\n      return getIdUponLeftKey();\n\n    case Keys.right:\n      return getIdUponRightKey();\n\n    case Keys.up:\n      return getIdUponUpKey();\n\n    case Keys.down:\n      return getIdUponDownKey();\n\n    case Keys.home:\n      return idUtils.ZERO_LEVEL_ZERO_NODE_ID;\n\n    case Keys.end:\n      return getIdUponEndKey();\n\n    default:\n      return itemId;\n  }\n\n  function getIdUponLeftKey() {\n    return idUtils.isIdZeroLevel(itemId) // For expanded disabled items, navigate directly to the parent.\n    // Collapse cannot happen because an event is not fired to the client.\n    || fieldsSvc.expanded(item) && isEnabledAndAllParentsEnabled(itemId, items, fieldsSvc) ? itemId : idUtils.getDirectParentId(itemId);\n  }\n\n  function getIdUponRightKey() {\n    return isItemExpandedAndWithChildren(item, fieldsSvc) ? idUtils.getFirstChildId(itemId) : itemId;\n  }\n\n  function getIdUponUpKey() {\n    var index = Number(idUtils.getShortId(itemId));\n    var parentId = idUtils.getDirectParentId(itemId);\n    return index ? getLastNotOpenedChildId(idUtils.createId(index - 1, parentId), items, fieldsSvc) : idUtils.isIdZeroLevel(itemId) ? itemId : parentId;\n  }\n\n  function getIdUponDownKey() {\n    if (isItemExpandedAndWithChildren(item, fieldsSvc)) {\n      return idUtils.getFirstChildId(itemId);\n    } else {\n      return getNextItemId(itemId, items) || itemId;\n    }\n  }\n\n  function getIdUponEndKey() {\n    var result = (items.length - 1).toString();\n    var currentItem = items[items.length - 1];\n\n    while (isItemExpandedAndWithChildren(currentItem, fieldsSvc)) {\n      result = idUtils.createId(currentItem.items.length - 1, result);\n      currentItem = currentItem.items[currentItem.items.length - 1];\n    }\n\n    return result;\n  }\n}\n\nfunction getNextItemId(itemId, items) {\n  var parentId = idUtils.getDirectParentId(itemId);\n  var parent = parentId ? idUtils.getItemById(parentId, items) : undefined;\n  var siblings = parent ? parent.items : items;\n  var index = Number(idUtils.getShortId(itemId));\n  return index < siblings.length - 1 ? idUtils.createId(index + 1, parentId) : parent ? getNextItemId(parentId, items) : undefined;\n}\n\nfunction getLastNotOpenedChildId(itemId, items, fieldsSvc) {\n  var item = idUtils.getItemById(itemId, items);\n\n  if (isItemExpandedAndWithChildren(item, fieldsSvc)) {\n    return getLastNotOpenedChildId(idUtils.createId(item.items.length - 1, itemId), items, fieldsSvc);\n  } else {\n    return itemId;\n  }\n}","map":{"version":3,"sources":["../../../src/utils/getItemIdUponKeyboardNavigation.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { Keys } from '@progress/kendo-react-common';\nimport * as idUtils from './itemIdUtils';\nimport { isItemExpandedAndWithChildren, isEnabledAndAllParentsEnabled } from './itemUtils';\n/**\n * @hidden\n */\nexport default function getItemIdUponKeyboardNavigation(item, itemId, items, keyCode, fieldsSvc) {\n    switch (keyCode) {\n        case Keys.left:\n            return getIdUponLeftKey();\n        case Keys.right:\n            return getIdUponRightKey();\n        case Keys.up:\n            return getIdUponUpKey();\n        case Keys.down:\n            return getIdUponDownKey();\n        case Keys.home:\n            return idUtils.ZERO_LEVEL_ZERO_NODE_ID;\n        case Keys.end:\n            return getIdUponEndKey();\n        default:\n            return itemId;\n    }\n    function getIdUponLeftKey() {\n        return idUtils.isIdZeroLevel(itemId)\n            // For expanded disabled items, navigate directly to the parent.\n            // Collapse cannot happen because an event is not fired to the client.\n            || (fieldsSvc.expanded(item) && isEnabledAndAllParentsEnabled(itemId, items, fieldsSvc)) ?\n            itemId : idUtils.getDirectParentId(itemId);\n    }\n    function getIdUponRightKey() {\n        return isItemExpandedAndWithChildren(item, fieldsSvc) ? idUtils.getFirstChildId(itemId) : itemId;\n    }\n    function getIdUponUpKey() {\n        var index = Number(idUtils.getShortId(itemId));\n        var parentId = idUtils.getDirectParentId(itemId);\n        return index ? getLastNotOpenedChildId(idUtils.createId(index - 1, parentId), items, fieldsSvc) :\n            idUtils.isIdZeroLevel(itemId) ? itemId : parentId;\n    }\n    function getIdUponDownKey() {\n        if (isItemExpandedAndWithChildren(item, fieldsSvc)) {\n            return idUtils.getFirstChildId(itemId);\n        }\n        else {\n            return getNextItemId(itemId, items) || itemId;\n        }\n    }\n    function getIdUponEndKey() {\n        var result = (items.length - 1).toString();\n        var currentItem = items[items.length - 1];\n        while (isItemExpandedAndWithChildren(currentItem, fieldsSvc)) {\n            result = idUtils.createId(currentItem.items.length - 1, result);\n            currentItem = currentItem.items[currentItem.items.length - 1];\n        }\n        return result;\n    }\n}\nfunction getNextItemId(itemId, items) {\n    var parentId = idUtils.getDirectParentId(itemId);\n    var parent = parentId ? idUtils.getItemById(parentId, items) : undefined;\n    var siblings = parent ? parent.items : items;\n    var index = Number(idUtils.getShortId(itemId));\n    return index < siblings.length - 1 ?\n        idUtils.createId(index + 1, parentId) :\n        parent ? getNextItemId(parentId, items) : undefined;\n}\nfunction getLastNotOpenedChildId(itemId, items, fieldsSvc) {\n    var item = idUtils.getItemById(itemId, items);\n    if (isItemExpandedAndWithChildren(item, fieldsSvc)) {\n        return getLastNotOpenedChildId(idUtils.createId(item.items.length - 1, itemId), items, fieldsSvc);\n    }\n    else {\n        return itemId;\n    }\n}\n//# sourceMappingURL=getItemIdUponKeyboardNavigation.js.map"]},"metadata":{},"sourceType":"module"}